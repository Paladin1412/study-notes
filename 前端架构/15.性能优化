### TCP
1. ip负责找到
2. tcp负责数据完整性和有序性，三次握手，粘包，滑动窗口等机制
3. http 应用层，负责应用层数据，数据终止时机

需要UDP的场景: 
直播，语音识别。 
1、性能高，允许丢包
2、包本身特别小，不需要拆分数据，重发机制很好写，比较典型的就是dns

优化策略
1、长链接
2、减少文件体积，js打包，图片压缩，gizp压缩
3、减少请求次数，雪碧图。兰家早，js，css打包，缓存机制
4、减少用户和服务器距离，cdn

三次握手:
1. 你在不
2. 我在呢
3. 那我开始发送数据了

http:
1. 携带无状态的数据，比如header,cookie
2. 合理利用缓存

前端代码到底怎么上线?
最早阶段，写完html，css，js直接拷贝到nginx的dist目录，问题是图片icon太多，文件重名的情况用户需要强刷
现在，使用webpack，比如雪碧图，文件名修改，利用hash值，gizp，nginx负载均衡
拆包的好处文件改变不是整个文件都发生改变

### 缓存
1. http cache：协商缓存
2. service worker cache: 离线缓存
3. memory cache: 内存中的缓存
4. push cache：http2的缓存

### 文件打包
分析文件大小
```
npm install lodash echarts moment --save-dev;

const BundleAnalayzerplugin = require('webpack-bundle-analyzer').BundleAnalayzerplugin;

module.exports = {
    configureWebpacl: {
        plugins: [
            new BundleAnalayzerplugin()
        ]
    }
}

```

输出代码

```
import monent from 'moment';
import _ from 'lodash';
Vue.config.productionTip = false;
console.log(moment());
console.log(_.max([5,4,1,6,8]));
```
或者执行vue ui

如果我们改成只引入lodash 需要的模块，moment换成更小的dayjs
打包后的大小从464kb下江城143kb

删除冗余代码的tree-shaking，和去除无效代码，我们webpack那里都介绍过，这里不赘述了，如果是个别页面使用了echats, 移动记得懒加载

### 图片优化
图片通常是占用流量的，PC端加载的平均图片大小时600k，简直比js打包后的文件还大了，所有针对图片的优化，也是收益不错的
1. jpg
    有损压缩
    体积小，不支持透明
    用于背景，轮播
2. png
    有损压缩，质量高，支持透明
    色彩线条更丰富，小图，比如logo，商品icon
3. svg
    文本，体积小矢量图
    渲染成本，学习成本
